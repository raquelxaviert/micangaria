{%- assign product = product | default: all_products[request.path | split: '/' | last] -%}
<div class="product-detail" style="max-width: 900px; margin: 0 auto; padding: 3em 1em; display: flex; flex-wrap: wrap; gap: 2em; align-items: flex-start;">
  <div style="flex: 1 1 320px; min-width: 320px;">
    <img src="{{ product.featured_image | img_url: '600x' }}" alt="{{ product.title }}" style="width: 100%; border-radius: 12px; box-shadow: 0 2px 8px rgba(76,59,39,0.08);" />
  </div>
  <div style="flex: 2 1 320px; min-width: 320px;">
    <h1 class="headline" style="font-size: 2.2em; margin-bottom: 0.5em; color: {{ settings.primary_color }};">{{ product.title }}</h1>
    <p style="font-size: 1.2em; margin-bottom: 1em; color: {{ settings.text_color }};">{{ product.description }}</p>
    <p style="font-size: 1.5em; font-weight: bold; color: {{ settings.primary_color }}; margin-bottom: 1em;">{{ product.price | money }}</p>
    <form action="/cart/add" method="post" style="margin-bottom: 1.5em;">
      <input type="hidden" name="id" value="{{ product.variants.first.id }}">
      <button type="submit" class="btn-primary" style="width: 100%; font-size: 1.1em;">Adicionar ao carrinho</button>
    </form>
    {% if product.variants.size > 1 %}
      <div style="margin-bottom: 1em;">
        <label for="variant-select">Escolha uma opção:</label>
        <select id="variant-select" name="id" style="width: 100%; padding: 0.5em; border-radius: 4px; border: 1px solid #ccc;">
          {% for variant in product.variants %}
            <option value="{{ variant.id }}">{{ variant.title }} - {{ variant.price | money }}</option>
          {% endfor %}
        </select>
      </div>
    {% endif %}
    {% if product.available == false %}
      <p style="color: #b91c1c; font-weight: bold;">Produto esgotado</p>
    {% endif %}
  </div>
</div>
