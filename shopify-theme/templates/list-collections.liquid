{% comment %}
  Collections list template for miçangaria
{% endcomment %}

<div class="container py-12">
  <!-- Page Header -->
  <div class="text-center mb-12">
    <h1 class="headline text-primary mb-4" style="font-size: 2.5rem;">Nossas Coleções</h1>
    <p class="text-muted-foreground text-lg" style="max-width: 32rem; margin: 0 auto;">
      Descubra nossa seleção cuidadosa de peças artesanais, organizadas por categorias.
    </p>
  </div>

  <!-- Collections Grid -->
  <div class="grid grid-cols-1 md-grid-cols-2 lg-grid-cols-3" style="gap: 2rem;">
    {% for collection in collections %}
      {% unless collection.handle == 'frontpage' %}
        <article class="collection-card group">
          <a href="{{ collection.url }}" class="block" style="text-decoration: none;">
            <!-- Collection Image -->
            <div class="aspect-square mb-4 overflow-hidden rounded-lg bg-muted" style="background: hsl(var(--muted));">
              {% if collection.featured_image %}
                <img 
                  src="{{ collection.featured_image | img_url: '600x600' }}"
                  alt="{{ collection.featured_image.alt | default: collection.title }}"
                  class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"
                  loading="lazy"
                >
              {% else %}
                <!-- Placeholder when no image -->
                <div class="w-full h-full flex items-center justify-center">
                  <i data-lucide="image" style="width: 3rem; height: 3rem; color: hsl(var(--muted-foreground));"></i>
                </div>
              {% endif %}
            </div>

            <!-- Collection Info -->
            <div class="space-y-2">
              <h3 class="headline text-foreground group-hover:text-primary transition-colors" style="font-size: 1.25rem;">
                {{ collection.title }}
              </h3>
              
              {% if collection.description != blank %}
                <p class="text-muted-foreground text-sm line-clamp-2">
                  {{ collection.description | strip_html | truncate: 100 }}
                </p>
              {% endif %}

              <div class="flex items-center justify-between">
                <span class="text-sm text-muted-foreground">
                  {{ collection.products_count }} 
                  {% if collection.products_count == 1 %}produto{% else %}produtos{% endif %}
                </span>
                
                <span class="text-primary text-sm font-medium group-hover:underline">
                  Ver coleção
                  <i data-lucide="arrow-right" style="width: 0.875rem; height: 0.875rem; margin-left: 0.25rem; display: inline-block; vertical-align: middle;"></i>
                </span>
              </div>
            </div>
          </a>
        </article>
      {% endunless %}
    {% endfor %}
  </div>

  <!-- Empty State -->
  {% if collections.size == 0 %}
    <div class="text-center py-16">
      <i data-lucide="folder-open" style="width: 4rem; height: 4rem; color: hsl(var(--muted-foreground)); margin: 0 auto 1rem;"></i>
      <h2 class="headline text-foreground mb-2" style="font-size: 1.5rem;">Nenhuma coleção encontrada</h2>
      <p class="text-muted-foreground mb-6">
        Ainda não temos coleções disponíveis, mas em breve teremos novidades!
      </p>
      <a href="/" class="btn-primary">
        <i data-lucide="home" style="width: 1rem; height: 1rem; margin-right: 0.5rem;"></i>
        Voltar ao Início
      </a>
    </div>
  {% endif %}

  <!-- Featured Collections (if you want to highlight specific ones) -->
  {% assign featured_collections = 'colares,brincos,pulseiras,aneis' | split: ',' %}
  {% assign has_featured = false %}
  
  {% for handle in featured_collections %}
    {% assign featured_collection = collections[handle] %}
    {% if featured_collection != blank %}
      {% assign has_featured = true %}
      {% break %}
    {% endif %}
  {% endfor %}

  {% if has_featured %}
    <div class="mt-16 pt-12 border-t" style="border-color: hsl(var(--border));">
      <div class="text-center mb-8">
        <h2 class="headline text-primary mb-4" style="font-size: 2rem;">Coleções em Destaque</h2>
        <p class="text-muted-foreground">
          Nossas categorias mais populares, escolhidas especialmente para você.
        </p>
      </div>

      <div class="grid grid-cols-2 lg-grid-cols-4" style="gap: 1.5rem;">
        {% for handle in featured_collections %}
          {% assign featured_collection = collections[handle] %}
          {% if featured_collection != blank %}
            <a href="{{ featured_collection.url }}" class="group text-center" style="text-decoration: none;">
              <div class="aspect-square mb-3 overflow-hidden rounded-full bg-muted mx-auto" style="background: hsl(var(--muted)); width: 8rem; height: 8rem;">
                {% if featured_collection.featured_image %}
                  <img 
                    src="{{ featured_collection.featured_image | img_url: '200x200' }}"
                    alt="{{ featured_collection.title }}"
                    class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"
                    loading="lazy"
                  >
                {% else %}
                  <div class="w-full h-full flex items-center justify-center">
                    <i data-lucide="sparkles" style="width: 2rem; height: 2rem; color: hsl(var(--muted-foreground));"></i>
                  </div>
                {% endif %}
              </div>
              <h3 class="font-medium text-foreground group-hover:text-primary transition-colors">
                {{ featured_collection.title }}
              </h3>
            </a>
          {% endif %}
        {% endfor %}
      </div>
    </div>
  {% endif %}
</div>

<style>
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.collection-card {
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.collection-card:hover {
  transform: translateY(-0.25rem);
  box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
}
</style>
