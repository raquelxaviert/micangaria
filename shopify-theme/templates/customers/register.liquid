{% comment %}
  Template de cadastro - mantendo o design sofisticado do miçangaria
{% endcomment %}

<div class="container py-16">
  <div class="max-w-md mx-auto">
    
    <!-- Cabeçalho -->
    <div class="text-center mb-8">
      <div class="mb-4">
        <i data-lucide="user-plus" class="text-primary mx-auto" style="width: 3rem; height: 3rem;"></i>
      </div>
      <h1 class="font-headline text-3xl text-primary mb-2">
        Criar Conta
      </h1>
      <p class="text-muted-foreground">
        Junte-se à comunidade miçangaria
      </p>
    </div>

    <!-- Formulário de cadastro -->
    <div class="card p-8">
      {% form 'create_customer' %}
        
        {% if form.errors %}
          <div class="alert alert-error mb-6">
            <div class="flex items-center">
              <i data-lucide="alert-circle" style="width: 1.25rem; height: 1.25rem; margin-right: 0.5rem;"></i>
              <span class="font-medium">Erro no cadastro</span>
            </div>
            <ul class="mt-2 text-sm">
              {% for error in form.errors %}
                <li>{{ error }}</li>
              {% endfor %}
            </ul>
          </div>
        {% endif %}

        <div class="space-y-6">
          <!-- Nome -->
          <div>
            <label for="FirstName" class="block text-sm font-medium text-foreground mb-2">
              Nome <span class="text-destructive">*</span>
            </label>
            <div class="relative">
              <input 
                type="text" 
                name="customer[first_name]" 
                id="FirstName"
                class="form-input w-full"
                placeholder="Seu nome"
                autocomplete="given-name"
                {% if form.first_name %}value="{{ form.first_name }}"{% endif %}
                required
              >
              <i data-lucide="user" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground" style="width: 1rem; height: 1rem;"></i>
            </div>
          </div>

          <!-- Sobrenome -->
          <div>
            <label for="LastName" class="block text-sm font-medium text-foreground mb-2">
              Sobrenome <span class="text-destructive">*</span>
            </label>
            <div class="relative">
              <input 
                type="text" 
                name="customer[last_name]" 
                id="LastName"
                class="form-input w-full"
                placeholder="Seu sobrenome"
                autocomplete="family-name"
                {% if form.last_name %}value="{{ form.last_name }}"{% endif %}
                required
              >
              <i data-lucide="user" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground" style="width: 1rem; height: 1rem;"></i>
            </div>
          </div>

          <!-- Email -->
          <div>
            <label for="Email" class="block text-sm font-medium text-foreground mb-2">
              E-mail <span class="text-destructive">*</span>
            </label>
            <div class="relative">
              <input 
                type="email" 
                name="customer[email]" 
                id="Email"
                class="form-input w-full"
                placeholder="seu.email@exemplo.com"
                autocomplete="email"
                {% if form.email %}value="{{ form.email }}"{% endif %}
                required
              >
              <i data-lucide="mail" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground" style="width: 1rem; height: 1rem;"></i>
            </div>
          </div>

          <!-- Senha -->
          <div>
            <label for="CreatePassword" class="block text-sm font-medium text-foreground mb-2">
              Senha <span class="text-destructive">*</span>
            </label>
            <div class="relative">
              <input 
                type="password" 
                name="customer[password]" 
                id="CreatePassword"
                class="form-input w-full"
                placeholder="••••••••"
                autocomplete="new-password"
                minlength="8"
                required
              >
              <i data-lucide="lock" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground" style="width: 1rem; height: 1rem;"></i>
            </div>
            <p class="text-xs text-muted-foreground mt-1">
              Mínimo de 8 caracteres
            </p>
          </div>

          <!-- Aceitar termos -->
          <div class="flex items-start gap-3">
            <input 
              type="checkbox" 
              id="AcceptTerms"
              class="form-checkbox mt-1"
              required
            >
            <label for="AcceptTerms" class="text-sm text-foreground">
              Eu aceito os 
              <a href="/pages/terms" class="text-secondary hover:text-primary transition-colors">
                Termos de Uso
              </a> 
              e a 
              <a href="/pages/privacy" class="text-secondary hover:text-primary transition-colors">
                Política de Privacidade
              </a>
            </label>
          </div>

          <!-- Newsletter -->
          <div class="flex items-start gap-3">
            <input 
              type="checkbox" 
              name="customer[accepts_marketing]"
              id="AcceptsMarketing"
              class="form-checkbox mt-1"
              checked
            >
            <label for="AcceptsMarketing" class="text-sm text-foreground">
              Quero receber novidades e ofertas especiais por e-mail
            </label>
          </div>

          <!-- Botão de cadastro -->
          <button type="submit" class="btn btn-primary w-full btn-lg">
            <i data-lucide="user-plus" style="width: 1.25rem; height: 1.25rem; margin-right: 0.5rem;"></i>
            Criar Conta
          </button>
        </div>

      {% endform %}

      <!-- Link para login -->
      <div class="text-center mt-6">
        <div class="border-t border-border pt-4">
          <p class="text-muted-foreground text-sm mb-3">
            Já tem uma conta?
          </p>
          <a href="{{ routes.account_login_url }}" 
             class="btn btn-secondary w-full">
            <i data-lucide="log-in" style="width: 1rem; height: 1rem; margin-right: 0.5rem;"></i>
            Entrar
          </a>
        </div>
      </div>
    </div>

    <!-- Benefícios de criar conta -->
    <div class="mt-8">
      <h3 class="font-headline text-lg text-primary text-center mb-4">
        Benefícios de ter uma conta
      </h3>
      <div class="grid gap-4">
        <div class="flex items-center gap-3 text-sm">
          <i data-lucide="heart" class="text-secondary flex-shrink-0" style="width: 1.25rem; height: 1.25rem;"></i>
          <span>Salve seus produtos favoritos</span>
        </div>
        <div class="flex items-center gap-3 text-sm">
          <i data-lucide="truck" class="text-secondary flex-shrink-0" style="width: 1.25rem; height: 1.25rem;"></i>
          <span>Acompanhe seus pedidos</span>
        </div>
        <div class="flex items-center gap-3 text-sm">
          <i data-lucide="gift" class="text-secondary flex-shrink-0" style="width: 1.25rem; height: 1.25rem;"></i>
          <span>Ofertas exclusivas</span>
        </div>
        <div class="flex items-center gap-3 text-sm">
          <i data-lucide="zap" class="text-secondary flex-shrink-0" style="width: 1.25rem; height: 1.25rem;"></i>
          <span>Compras mais rápidas</span>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- Estilos específicos para formulários -->
<style>
  .form-input {
    padding: 0.75rem 1rem;
    padding-right: 2.5rem;
    border: 1px solid hsl(var(--border));
    border-radius: 0.5rem;
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
    font-size: 0.875rem;
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
  }
  
  .form-input:focus {
    outline: none;
    border-color: hsl(var(--primary));
    box-shadow: 0 0 0 3px hsl(var(--ring) / 0.2);
  }
  
  .form-checkbox {
    width: 1rem;
    height: 1rem;
    border: 1px solid hsl(var(--border));
    border-radius: 0.25rem;
    background-color: hsl(var(--background));
    transition: all 0.3s ease;
  }
  
  .form-checkbox:checked {
    background-color: hsl(var(--primary));
    border-color: hsl(var(--primary));
  }
  
  .form-checkbox:focus {
    outline: none;
    box-shadow: 0 0 0 2px hsl(var(--ring) / 0.2);
  }
  
  .alert {
    padding: 1rem;
    border-radius: 0.5rem;
    font-size: 0.875rem;
  }
  
  .alert-error {
    background-color: hsl(var(--destructive) / 0.1);
    border: 1px solid hsl(var(--destructive) / 0.2);
    color: hsl(var(--destructive-foreground));
  }
  
  .text-destructive {
    color: hsl(var(--destructive));
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Validação básica da senha
    const passwordInput = document.getElementById('CreatePassword');
    if (passwordInput) {
      passwordInput.addEventListener('input', function() {
        const password = this.value;
        const isValid = password.length >= 8;
        
        if (password.length > 0) {
          if (isValid) {
            this.style.borderColor = 'hsl(var(--secondary))';
          } else {
            this.style.borderColor = 'hsl(var(--destructive))';
          }
        } else {
          this.style.borderColor = 'hsl(var(--border))';
        }
      });
    }
    
    // Inicializar ícones Lucide
    if (typeof lucide !== 'undefined') {
      lucide.createIcons();
    }
  });
</script>
